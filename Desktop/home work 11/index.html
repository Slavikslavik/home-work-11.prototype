<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>home- work11</title>
</head>
<body>
	<script>
		let Student = function(first,last,bdyear) {

			this.firstname = first;//agrument
			this.lastname = last;
			this.bdyear = bdyear;

			//this.allMARKS = 0;

			this.marks = new Array(30).fill(undefined);
			//console.log(this.marks);
			this.attendance = new Array(30).fill(undefined);
			//console.log(this.attendance);
		}		

			Student.prototype.fullName = function(){
				return this.firstname + '  ' + this.lastname;
			};

			Student.prototype.getAge = function(){
				const currentdate = new Date().getFullYear();
				//console.log(currentdate);
				return	(currentdate - this.bdyear) ;
			};

			// Посещаемость 
			Student.prototype.present = function(){
				 return this.attendance[this.attendance.indexOf(undefined)] = 'true';
			};

			//Отсутствие
			Student.prototype.absent = function(){
				return this.attendance[this.attendance.indexOf(undefined)] = 'false';	
			};

			// Выставление Оценок (С ЗАЩАИТОЙ ОТ 0 до 10!???)
			Student.prototype.grade_mark = function(arg){
				if(0 < arg && arg <= 10){ 
					return this.marks[this.marks.indexOf(undefined)] = arg;
				}
			}; 

			// Средняя оценка 
			Student.prototype.middle_mark = function(){
             	let fil_mark = this.marks.filter(function(item){
             		return item !== undefined ;
             	}) ;
				let red_mark =  fil_mark.reduce(function(sum,i) {
					return sum +=i ;		
				},0);
					return red_mark / fil_mark.length;
			};

			//Средняя посещаемость
			Student.prototype.middle_attendance = function(){
				 let fil_attendeance = this.attendance.filter(function(item){
             	return item !== undefined ;
             	}) ;
				let elem = 0;
				fil_attendeance.forEach(function(item){
					if(item === 'true'){
						item = 1;
						return elem += item;
					}
				});
					return elem / fil_attendeance.length;
			};

			Student.prototype.summery = function() {

				if (this.middle_mark() > 9 && this.middle_attendance() > 0.9){
					return "Ути какой молодчинка!";
				} else if (this.middle_mark() > 9 || this.middle_attendance() > 0.9){
					return "Норм, но можно лучше";
				} else {
				 	return "Редиска";
				}

			};
		


		
		let kristina = new Student('Кристина','Тарасова','1988');

		let vasya = new Student('Вася','Петров','1991');

		

		

		// console.log(vasya);
		// console.log(vasya.getAge());
		 
		 
		 // Студент 1 Вася 
		 console.log('Полное имя '+ vasya.fullName()); 
		 console.log('Васе ' +  vasya.getAge() + ' лет'); 

		 // По прошествию  5-ти занятий 


		//Посещение занятий ВАСЕЙ
		 vasya.present();
		 vasya.present();
		 vasya.present();
		 vasya.present();
		 vasya.absent();

		 console.log('Посещенные занятия ВАСИ ' + vasya.attendance)
		 // Оценки ВАСИ
		 vasya.grade_mark(8);
		 vasya.grade_mark(5);
		 vasya.grade_mark(4);
		 vasya.grade_mark(9);
		 vasya.grade_mark(0);

		 console.log('Оценки ВАСИ ' + vasya.marks);

		 console.log('________________________')

		 //Студент 2
		 console.log('Полное имя '+ kristina.fullName()); 
         console.log('Кристине ' + kristina.getAge() + ' года');
		 

		 //Посещение Кристины
		 kristina.present();
		 kristina.present();
		 kristina.present();
		 kristina.present();
		 kristina.present();

		 console.log('Посещенные занятия Кристины ' +  kristina.attendance)

		 //Оценки Кристины 
		 kristina.grade_mark(10);
		 kristina.grade_mark(10);
		 kristina.grade_mark(9);
		 kristina.grade_mark(10);
		 kristina.grade_mark(10);

		 console.log('Оценки Кристины ' + kristina.marks);

		 console.log('Средняя оценка Kристины ' + kristina.middle_mark()); // 
		 console.log('Средняя оценка Васьки ' + vasya.middle_mark());

		 console.log('Средняя посещаемость Васи ' + vasya.middle_attendance());

		 console.log('Средняя посещаемость Васи ' + kristina.middle_attendance());

		 console.log('Кристина - ' + kristina.summery());
		 console.log('Вася - ' + vasya.summery());
	
	</script>
</body>
</html>